



### API

#### REST API definition

```java
	/**
     * Pricing the cart result base on the request {@link CartPricingReq}.
     * @param request of {@link CartPricingReq}
     * @return data of {@link CartPricingResp}
     */
    @PostMapping(value = "/pricing", consumes = "application/vnd.active.cart-service.v1+json")
    public CartPricingResp price(@RequestBody @Valid CartPricingReq request) {
        LOG.debug("Pricing cart for request:{}", request);
        ...
    }
```



### Request

#### Class definitions

##### CartPricingReq

```java
public class CartPricingReq {
    /**
     * A list of {@link CartItem} for cart pricing.
     */
    @Valid
    @NotEmpty(message = "can not be empty")
    private List<CartItem> cartItems;
}
```



- CartPricingReq validation 

| Fields    | Rules    |
| :-------- | -------- |
| cartItems | Required |

##### CartItem

```java
public class CartItem {
    /**
     * A specific number for this cart item.
     */
    @NotBlank(message = "can not be blank")
    @Size(min = 1, max = 255, message = "should be 1-255 chars")
    private String identifier;

    /**
     * (?SALE,PENDING)
     */
    private CartItemType cartItemType?;

    @NotNull(message = "can not be null")
    private Currency currency;


    @NotNull(message = "can not be null")
    private Long productId;


    @NotNull(message = "can not be null")
    private Integer quantity;?

    /**
     * When we purchase an included merchandise(usually an ADDON) together with a parent merchandise(usually a
     * Registration), we usually want to override the price and some other fields of the included merchandise to make
     * them different from its original ones defined in the Product.
     */
    private Long includedAssociatedProductId;

}
```



- CartItem validation 

| Fields              | Rules                                                        | Max length |
| :------------------ | ------------------------------------------------------------ | ---------- |
| identifier          | Required                                                     | 255        |
| cartItemType      | Required                                                     | --         |
| currency               | Required                                 | --         |
| productId          | Required                                                     | --         |
| quantity     | Required<br/>Greater than 0                                                     | --         |



### Response

#### Class definitions

##### CartPricingResp

```java
public class CartPricingResp {
    
    private List<CartItemResult> CartItemResults;
}
```



##### CartItemResult

```java
public class CartItemResult {

    /**
     * The number indicates which cart item.
     */
    @NotBlank(message = "can not be blank")
    @Size(min = 1, max = 255, message = "should be 1-255 chars")
    private String identifier;

    @Valid
    private List<CartItemFee> cartItemFees;

}
```

##### CartItemFee

```java
public class CartItemFee {
   
    private String name;

    
    @NotNull(message = "can not be null")
    private BigDecimal amount;

    
    private String description;

    
    private CartItemFeeType feeType;

    @NotNull(message = "can not be null")
    private FeeTransactionType feeTransactionType;
}
```

- CartItemFee validation

| Fields     | Rules    | Max Length |
| :--------- | -------- | ---------- |
| amount       | Required | --        |
| feeTransactionType     | Required | --         |






##### Enum CartItemType

```java
public enum CartItemType {

    /**
     * This value indicates the orderLine is a sale.
     */
    SALE,

    /**
     * This value indicates order line that is a pending or pre-sale type of line.  The user is not actually paying
     * for it or decrementing inventory on this, just indicating the intent to purchase this later (will be converted
     * to a SALE eventually).  These lines should not be inventory reserved nor should they be pushed to ledger.  They
     * also don't have Active fees calculated for them.  The are essentially placeholder lines that don't affect the order
     * balance/totals.
     */
    PENDING;
}
```



##### Enmu CartItemFeeType  

```java
public enum CartItemFeeType {
    /**
     * The fee type that represents the price of the order line.  This is the base price of the order line
     * representing what the line's product is sold for.  Note that this fee type is used for both Sale lines
     * and Return lines.  For return lines this represents the amount to be refunded.
     */
    PRICE;
}
```

##### Enmu FeeTransactionType  

```java
public enum FeeTransactionType {
    /**
     * Indicates a debit type fee.  This indicates a charge to the customer as with a PRICE type fee on a SALE line.
     */
    DEBIT,
    
    /**
     * Indicates a credit type fee.  This indicates a refund to the customer as with a PRICE type fee on a RETURN line.
     */
    CREDIT;
}
```




## REST doc

http://share-apidocs.activenetwork.com/fbi/cart-service/

